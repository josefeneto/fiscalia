# Railway Build Configuration
# Otimizações para deploy mais rápido

[build]
# Usa Dockerfile para build
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[build.watchPatterns]
# Ignora ficheiros que não afetam o build
ignore = [
    "**/.git/**",
    "**/node_modules/**",
    "**/__pycache__/**",
    "**/*.pyc",
    "**/.pytest_cache/**",
    "**/tests/**",
    "**/.venv/**",
    "**/venv/**",
    "**/.DS_Store",
    "**/*.log"
]

[deploy]
# Comando de start
startCommand = "streamlit run app.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true"

# Health check
healthcheckPath = "/_stcore/health"
healthcheckTimeout = 100

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Número de replicas (pode escalar depois)
numReplicas = 1
